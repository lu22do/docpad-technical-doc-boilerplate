```
title: Application Developer Guide
layout: guide
tags: ['guide']
pageOrder: 1
```

# Application Developer’s Guide

## Overview

### Audience

This document is intended for developers using 5 to create HTML
applications. The reader is expected to be familiar with the JavaScript
programming language, HTML, CSS, and general object-oriented software
programming principles.

### Custom vs Standards

This documentation covers:

* Unique features of XXXX, and
* Deviations from standard HTML/JavaScript norms.

For general, non-specific information about HTML/JavaScript usage, refer
to one of many web resources, such as [*http://www.w3schools.com/*](http://www.w3schools.com/), for tutorials and specifications.

The *XXXX HTML Advanced Developer’s Guide* is also included in this
documentation set: refer to it for detailed advice about how to build
efficient applications using XXXX WebKit, particularly techniques to
maximize performance on a hardware-limited embedded device such as a
set-top box.

## WebKit

The main application development environment supported by XXXX 5 is
XXXX WebKit, a native WebKit­based browser and runtime environment.
XXXX 5.1.4 has been updated to use XXXX WebKit version 1.1.

The Ekioh browser previously provided for SVG-based development is now
deprecated, and described in [Appendix: Ekioh Browser \[Deprecated\]](http://otv5docs/CCOM5.1.4/Support/Application%20Developer's%20Guide.htm#Racbabiecfj).

### Supported Features

Standard features:

* HTML5
* CSS3
* Hardware-accelerated animations
* Video Playback using the standard `<video>` tag
* Web Inspector
* Cookies
* Same Origin Policy
* Web Worker
* Web Au
* Media Source Extensions (MSE)
* Encrypted Media Extensions (EME)

XXXX 5-specific features:

* A JavaScript API (CCOM):  Allows applications to access the Middleware features of XXXX.
* Alerts: When using XXXX WebKit, use `console.log`
instead of `alert` to output data to the console
log.
* Remote Controller keys
* Comprehensive debugging tools increasing debugging performance and
development efficiency.
* DSMCC (Digital storage media command and control)\
A protocol for simple data broadcasting and broadcast files systems.

### Running

To run an application on XXXX WebKit:

* Prepare the html application package, edit the *OTVAppMetadata.xml* file, and set the `<APP_TYPE>` to "html" (`<APP_TYPE>html</APP_TYPE>`)

* Install and run the application using the Application Controller
(refer to the [Application Installation](#application-installation)
section for details).

### Logging

XXXX WebKit uses the XXXX 5 `log` function to save internal (and other types) of logs coming from various types of JavaScript messages, including `alert`, `console.log`, `confirm` and `prompt`.

The XXXX WebKit log format is:

    STATUS : [OtvWebKit] [XXXX] code location : message

Where:

* `STATUS : \[OtvWebKit\]\` is generated by the OTV log function automatically.

* `XXXX\` is the log type, including "CONSOLE LOG", "ALERT", "CONFIRM" or
"PROMPT".

* `code location` is an optional JavaScript code location information, including the file name and line number. This information is disabled by default, and outputs only in verbose log mode. Refer to the *XXXX 5 HTML Advanced Developer’s Guide* for details about how to modify the *otvwebkit-config.xml* file to enable the `<js-log-verbose>` setting.

* `message` is a user-specified message in the JS API or Webkit message.

### Map a New Remote Control

To map a new remote control, follow this procedure:

1. Edit lircd.conf, a file normally located at /etc/lirc/lircd.conf or
/etc/lircd.conf on the target file system.

1. The lircd.conf file consists of pairs of string names and numerical
values.

1. The lircd.conf string names are located in the “LIRC Key Name” column
of the key mapping table.

1. HTML applications receive the numerical key values indicated by the
“XXXX WebKit Key Codes” columns.

Commonly used remote control key codes:

| Key Name | XXXX WebKit keydown keyCode (HEX) | XXXX WebKit keydown keyCode (DEC) | Comments |
|---|---|---|---|
| 0 | 0x30 | 48 |  |
| 1 | 0x31 | 49 |  |
| 2 | 0x32 | 50 |  |
| 3 | 0x33 | 51 |  |
| 4 | 0x34 | 52 |  |
| 5 | 0x35 | 53 |  |
| 6 | 0x36 | 54 |  |
| 7 | 0x37 | 55 |  |
| 8 | 0x38 | 56 |  |
| 9 | 0x39 | 57 |  |
| AUDIO | 0xF037 | 61495 |  |
| AUX | 0xF034 | 61492 |  |
| BACK | 0xA6 | 166 | Back |
| BACKSPACE | 0x08 | 8 | Backspace |
| BLUE | 0x196 | 406 | Blue |
| CHANNEL_DOWN | 0x1AC | 428 |  |
| CHANNEL_UP | 0x1AB | 427 |  |
| CURSOR_DOWN | 0x28 | 40 | Arrow |
| CURSOR_LEFT | 0x25 | 37 | Arrow |
| CURSOR_RIGHT | 0x27 | 39 | Arrow |
| CURSOR_UP | 0x26 | 38 | Arrow |
| DVD | 0xF033 | 61491 |  |
| EJECT | 0x19E | 414 |  |
| ENTER | 0x0D | 13 | OK/ENTER/SELECT |
| EPG | 0x1CA | 458 | Guide |
| EXIT | 0x259 | 601 | Exit |
| FASTFORWARD | 0x1A1 | 417 | >> |
| FAVORITES | 0xAB | 171 |  |
| GREEN | 0x194 | 404 | Green |
| INFO | 0x1C9 | 457 | Info |
| LANGUAGE | 0xF01E | 61470 |  |
| LAST | 0xF04B | 61515 | Last |
| MENU | 0x5D | 93 | Menu |
| MHP | 0xAC | 172 | YouTube |
| MUTE | 0xAD | 173 |  |
| NEXT | 0xB0 | 176 | >>|
| OK | 0x0D | 13 | Not |
| PAGE_DOWN | 0x22 | 34 |  |
| PAGE_UP | 0x21 | 33 |  |
| PAUSE | 0x13 | 19 |  |
| PLAY | 0xFA | 250 |  |
| PLAYPAUSE | 0xB3 | 179 |  |
| POWER | 0x199 | 409 |  |
| PREVIOUS | 0xB1 | 177 | << |
| PVR | 0xF01C | 61468 | DVR |
| RECORD | 0x1A0 | 416 |  |
| RED | 0x193 | 403 |  |
| RETURN | 0x0D | 13 | OK/ENTER/SELECT |
| REWIND | 0x19C | 412 | << |
| SAT | 0xF02B | 61483 |  |
| SLOW | 0x1A3 | 419 | Slow |
| STOP | 0xB2 | 178 |  |
| SUBTITLE | 0x1CC | 460 | Subtitle, |
| TV | 0xF027 | 61479 |  |
| VCR | 0xF029 | 61481 |  |
| VIDEO | 0xF038 | 61496 |  |
| VOLUME_DOWN | 0xAE | 174 |  |
| VOLUME_UP | 0xAF | 175 |  |
| YELLOW | 0x195 | 405 | Yellow |
| ZOOM | 0xFB | 251 | Zoom |

Refer to the [*HTML Key Mappings*](#html-key-mappings) table in the appendix for less common keys.

#### Key Mapping Example Adding new Keys

Some remote control keys have no clear equivalent, for those we
recommend using custom keys. For example, to add buttons for VOD and
PIP, add the following to *lircd.conf*.

    CUSTOM0 0xfc03ff00
    CUSTOM1 0xbd42ff00

> (Note the actual values may vary across remotes.)

In the JavaScript application, listen for "keydown" events, as in this
example:

    // Add event listener to listen for key input
    document.addEventListener("keydown", keyEvent, false);

    function keyEvent(evt)
    {
        if(evt.type == "keydown")
        {
            console.log("keydown keyCode = " + evt.keyCode);

            if(evt.keyCode == 0xF500)
            {
                console.log("Received VOD key");
            }

            if(evt.keyCode == 0xF501)
            {
                console.log("Received PIP key");
            }
        }
    }

### SSL Configuration

A sample certificate file, containing a useful set of certificates, is
provided with the XXXX WebKit. It is located by default at `/home/otv_system/ssl/certs/CAfile.pem`. This
file path is defined in the `otvwebkit-config.xml` using the <ssl-ca-file> entry, and may be modified to
point to any location. If this entry is empty all https web sites are
accessible.

Refer to the *XXXX 5 HTML Advanced Developer’s
Guide* for details about how to modify the *otvwebkit-config.xml* file.

Any new certificates must be added to the existing certificate file; all
certificates must be PEM encoded and concatenated into this single file.

The `openssl` command line tool (refer to [https://www.openssl.org/](https://www.openssl.org/) for details) may be used to convert a certificate file, typically `.crt`, into a `.pem` file.

The following command uses openssl to create a
*CAFile.pem* from a *net.crt*:

    openssl x509 –in net.crt –outform pem –out CAFile.pem

To create one .pem file from multiple certificates:

    openssl x509 –in net1.crt –outform pem –out caf1.pem
    openssl x509 –in net2.crt –outform pem –out caf2.pem
    openssl x509 –in net3.crt –outform pem –out caf3.pem
    cat caf\*.pem > CAFile.pem

The `–outform` option ensures that the resulting
encoding is PEM, no matter what the input encoding or file extensions
may be. The final ‘cat’ command can be duplicated by any text editor as
the PEM encoding is stored as ASCII text. Note that the openssl command itself assumes there is only one
certificate in a file.
